"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[709],{23709:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var o=n(66252),s=n(49963),i=n(3577);const a=e=>((0,o.dD)("data-v-16b3c297"),e=e(),(0,o.Cn)(),e),c={class:"contain"},r={class:"checkIfLoaded"},d={key:0,class:"body"},m={class:"commentor"},u={class:"comment"},l={key:0,class:"commentAdd"},g=a((()=>(0,o._)("label",{for:"commentAdd"},"Comment!",-1))),h={class:"addCommentBody"},p=(0,o.Uk)("submit"),w=(0,o.Uk)("Log in to Comment");function L(e,t,n,a,L,v){const f=(0,o.up)("base-spinner"),k=(0,o.up)("base-post"),b=(0,o.up)("base-button"),C=(0,o.up)("base-login");return(0,o.wg)(),(0,o.iD)("section",c,[(0,o.wy)((0,o.Wm)(f,null,null,512),[[s.F8,L.isLoading||!L.doneLoading]]),(0,o.wy)((0,o._)("div",r,[(0,o.Wm)(k,{onDoneLoading:v.postLoaded},null,8,["onDoneLoading"]),L.isLoading?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",d,[(0,o.Wm)(s.W3,{tag:"ui",name:"comment"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(v.comments,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e},[(0,o.wy)((0,o._)("div",m,[(0,o._)("h3",null,(0,i.zw)(e.body.username),1),(0,o.wy)((0,o._)("div",u,[(0,o._)("p",null,(0,i.zw)(e.body.comment),1)],512),[[s.F8,null!==e.commentText]])],512),[[s.F8,null!==e.commentorName]])])))),128))])),_:1}),v.isLogged?((0,o.wg)(),(0,o.iD)("div",l,[(0,o._)("form",{class:"addComment",onSubmit:t[1]||(t[1]=(0,s.iM)((function(){return v.saveComment&&v.saveComment(...arguments)}),["prevent"]))},[g,(0,o._)("div",h,[(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>L.commentToBe=e),class:"commentBox",name:"commentAdd",id:"commentAdd",cols:"",rows:"4",placeholder:"Your comment..."},null,512),[[s.nr,L.commentToBe]]),(0,o.Wm)(b,{class:"log-Button"},{default:(0,o.w5)((()=>[p])),_:1})])],32)])):((0,o.wg)(),(0,o.j4)(b,{key:1,class:"commentLogin",onClick:v.startLogin},{default:(0,o.w5)((()=>[w])),_:1},8,["onClick"])),(0,o.Wm)(C,{show:L.clickedLogin,onClose:v.startLogin},null,8,["show","onClose"])]))],512),[[s.F8,!L.isLoading]])])}var v=n(15861),f=n(64687),k=n.n(f),b=(n(94058),{props:["postId"],data(){return{clickedLogin:!1,isLoading:!0,commentToBe:"",doneLoading:!1}},activated(){var e=this;return(0,v.Z)(k().mark((function t(){return k().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("setPost",e.postId);case 2:case"end":return t.stop()}}),t,this)})))()},deactivated(){var e=this;return(0,v.Z)(k().mark((function t(){return k().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isLoading=!0,e.doneLoading=!1;case 2:case"end":return t.stop()}}),t,this)})))()},methods:{postLoaded(){this.doneLoading=!0},startLogin(){this.clickedLogin=!this.clickedLogin},saveComment(){var e=this;return(0,v.Z)(k().mark((function t(){return k().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""===e.commentToBe){t.next=4;break}return t.next=3,e.$store.dispatch("saveComment",e.commentToBe);case 3:e.commentToBe="";case 4:case"end":return t.stop()}}),t,this)})))()}},computed:{comments(){return this.$store.getters["getComments"]},isLogged(){return this.$store.getters["getAuth"]}},watch:{doneLoading:function(){var e=(0,v.Z)(k().mark((function e(){return k().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.doneLoading){e.next=3;break}return e.next=3,this.$store.dispatch("getComments",this.postId).then((()=>{this.isLoading=!1}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}}),C=n(83744);const y=(0,C.Z)(b,[["render",L],["__scopeId","data-v-16b3c297"]]);var _=y}}]);
//# sourceMappingURL=709.df46e6ac.js.map