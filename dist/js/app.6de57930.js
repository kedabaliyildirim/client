(function(){var e={71399:function(e,t,n){"use strict";n.d(t,{Z:function(){return A}});var o=n(66252),r=n(49963),s=n(3577);const a=e=>((0,o.dD)("data-v-42ffcdf7"),e=e(),(0,o.Cn)(),e),i={key:0,open:""},u=a((()=>(0,o._)("h2",null,"LOGIN",-1))),c={key:0,class:"message"},l={class:"contain-input"},d={key:0},g=a((()=>(0,o._)("label",{for:"username"},"Username:",-1))),p=a((()=>(0,o._)("label",{for:"password"},"Password:",-1))),m={class:"contain"},h=(0,o.Uk)("Login"),f={class:"socialLogin"},v={key:0},w=(0,o.Uk)("Close");function b(e,t,n,a,b,k){const y=(0,o.up)("base-button");return(0,o.wg)(),(0,o.j4)(o.lR,{to:"body"},[n.show?((0,o.wg)(),(0,o.iD)("div",{key:0,onClick:t[0]||(t[0]=function(){return k.tryClose&&k.tryClose(...arguments)}),class:"backdrop"})):(0,o.kq)("",!0),(0,o.Wm)(r.uT,{name:"dialogTransitation"},{default:(0,o.w5)((()=>[n.show?((0,o.wg)(),(0,o.iD)("dialog",i,[(0,o._)("header",null,[u,(0,o.WI)(e.$slots,"header",{},(()=>[(0,o._)("h2",null,(0,s.zw)(n.title),1)]),!0)]),(0,o._)("section",null,[(0,o.WI)(e.$slots,"default",{},(()=>[""!==b.finalLogMessage?((0,o.wg)(),(0,o.iD)("p",c,(0,s.zw)(b.finalLogMessage),1)):(0,o.kq)("",!0),(0,o._)("form",{onSubmit:t[5]||(t[5]=(0,r.iM)((()=>{}),["prevent"]))},[(0,o._)("div",l,[(0,o._)("div",null,[a.errorHandle?((0,o.wg)(),(0,o.iD)("p",d," username and password cannot be empty ")):(0,o.kq)("",!0),g,(0,o.wy)((0,o._)("input",{type:"text",name:"userName",placeholder:"username",autocomplete:"username","onUpdate:modelValue":t[1]||(t[1]=e=>a.user.name=e),class:"inputText"},null,512),[[r.nr,a.user.name,void 0,{trim:!0}]])]),(0,o._)("div",null,[p,(0,o.wy)((0,o._)("input",{type:"password",autocomplete:"current-password",name:"password",placeholder:"password","onUpdate:modelValue":t[2]||(t[2]=e=>a.user.password=e),class:"inputText"},null,512),[[r.nr,a.user.password,void 0,{trim:!0}]])])]),(0,o._)("div",m,[(0,o.Wm)(y,{onClick:a.login,class:"log-Button"},{default:(0,o.w5)((()=>[h])),_:1},8,["onClick"]),(0,o._)("div",f,[(0,o._)("img",{class:"googleLogin",src:"https://icon-library.com/images/google-login-icon/google-login-icon-24.jpg",onClick:t[3]||(t[3]=function(){return k.saveUserWithGoogle&&k.saveUserWithGoogle(...arguments)}),alt:""}),(0,o._)("img",{class:"googleLogin",src:"https://iconarchive.com/download/i82905/limav/flat-gradient-social/Facebook.ico",onClick:t[4]||(t[4]=function(){return k.loginWithFacebook&&k.loginWithFacebook(...arguments)}),alt:""})])])],32)]),!0)]),n.fixed?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("menu",v,[(0,o.WI)(e.$slots,"actions",{},(()=>[(0,o.Wm)(y,{onClick:k.tryClose},{default:(0,o.w5)((()=>[w])),_:1},8,["onClick"])]),!0)]))])):(0,o.kq)("",!0)])),_:3})])}var k=n(15861),y=n(64687),_=n.n(y),C=n(33907),x=n(2262),I=n(14998),P=n(25108),L={props:{show:{type:Boolean,required:!0},title:{type:String,required:!1},fixed:{type:Boolean,required:!1,default:!1},message:{required:!1,default:null}},setup(e,t){let{emit:n}=t;const o=(0,C.oR)(),r=(0,x.iH)({name:"",password:""}),s=(0,x.iH)(!1),a=function(){var e=(0,k.Z)(_().mark((function e(){return _().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""===r.value.name||""===r.value.password){e.next=6;break}return s.value=!1,e.next=4,o.dispatch("login",{userName:r.value.name,password:r.value.password}).then((()=>{n("close")})).catch((()=>{}));case 4:e.next=8;break;case 6:return s.value=!0,e.abrupt("return");case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}();return{user:r,login:a,errorHandle:s}},data(){return{finalLogMessage:""}},emits:["close"],methods:{getLogMessage(e){this.finalLogMessage=e},tryClose(){this.fixed||(this.finalLogMessage="",this.$emit("close"))},saveUserWithGoogle(){var e=this;return(0,k.Z)(_().mark((function t(){var n,o;return _().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$gAuth.signIn();case 3:if(n=t.sent,n){t.next=6;break}return t.abrupt("return",null);case 6:o={everything:n.getBasicProfile(),name:n.getBasicProfile().getGivenName(),surname:n.getBasicProfile().getFamilyName(),gId:n.getBasicProfile().getId(),email:n.getBasicProfile().getEmail(),idToken:n.getAuthResponse().id_token,type:"googleRegister"},I.Z.dispatch("registerUser",o).then((()=>{e.$emit("close")})),t.next=14;break;case 10:return t.prev=10,t.t0=t["catch"](0),P.error(t.t0),t.abrupt("return",null);case 14:case"end":return t.stop()}}),t,this,[[0,10]])})))()},loginWithFacebook(){FB.login((e=>{e.authResponse?FB.api("/me",{fields:"first_name, last_name, email"},(t=>{const n={name:t.first_name,surname:t.last_name,email:t.email,facebookId:t.id,accessToken:e.authResponse.accessToken,type:"facebookRegister"};I.Z.dispatch("registerUser",n).then((()=>{this.$emit("close")}))})):P.log("login error")}),{scope:"public_profile,email",enable_profile_selecto:!0})}},watch:{message:{deep:!0,handler:function(e){this.getLogMessage(e)}}}},S=n(83744);const Z=(0,S.Z)(L,[["render",b],["__scopeId","data-v-42ffcdf7"]]);var A=Z},9012:function(e,t,n){"use strict";n(35666);var o=n(49963),r=(n(28594),n(66252));function s(e,t,n,o,s,a){const i=(0,r.up)("the-header"),u=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(i),(0,r.Wm)(u,null,{default:(0,r.w5)((e=>{let{Component:t}=e;return[((0,r.wg)(),(0,r.j4)(r.Ob,null,[((0,r.wg)(),(0,r.j4)((0,r.LL)(t)))],1024))]})),_:1})],64)}var a=n(3577);const i={class:"navi"},u=(0,r.Uk)("Home Page"),c={key:0},l=(0,r.Uk)("About"),d=(0,r.Uk)("Register"),g={class:"nav-mobile"},p=(0,r.Uk)("+ add post"),m=(0,r.Uk)("+ add post "),h=(0,r.Uk)("Login"),f={key:0,id:"hoverProfile"},v={key:0,class:"navLoc"},w={class:"sidenav"},b=(0,r.Uk)("Register"),k=(0,r.Uk)("About");function y(e,t,n,s,y,_){const C=(0,r.up)("base-login"),x=(0,r.up)("base-button");return(0,r.wg)(),(0,r.iD)("section",null,[(0,r.Wm)(C,{message:y.finalLogMessage,show:y.status,onClose:_.login},null,8,["message","show","onClose"]),(0,r._)("header",null,[(0,r._)("nav",i,[(0,r._)("h1",null,[(0,r.Wm)(x,{link:"",to:"/"},{default:(0,r.w5)((()=>[u])),_:1})]),y.hamburgerStatus?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("ul",c,[(0,r._)("li",null,[(0,r.Wm)(x,{link:"",to:"/about"},{default:(0,r.w5)((()=>[l])),_:1})]),(0,r._)("li",null,[_.isLogged?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(x,{key:0,link:"",to:"/register"},{default:(0,r.w5)((()=>[d])),_:1}))])])),(0,r._)("div",g,[_.isLogged?((0,r.wg)(),(0,r.j4)(x,{key:0,link:"",to:"/posting"},{default:(0,r.w5)((()=>[p])),_:1})):(0,r.kq)("",!0),_.isLogged?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(x,{key:1,onClick:t[0]||(t[0]=t=>_.login(e.logMessage="please login to post"))},{default:(0,r.w5)((()=>[m])),_:1})),(0,r._)("div",{class:(0,a.C_)(["profile",{image:_.isLogged}])},[_.isLogged?((0,r.wg)(),(0,r.iD)("img",{key:1,onClick:t[1]||(t[1]=function(){return _.logout&&_.logout(...arguments)}),onMouseover:t[2]||(t[2]=function(){return _.profileHover&&_.profileHover(...arguments)}),onMouseout:t[3]||(t[3]=function(){return _.profileUnHover&&_.profileUnHover(...arguments)}),src:"https://i.pinimg.com/474x/5f/3b/48/5f3b486198cb4e1db5729207a666c750.jpg",alt:""},null,32)):((0,r.wg)(),(0,r.j4)(x,{key:0,navBar:"",onClick:_.login},{default:(0,r.w5)((()=>[h])),_:1},8,["onClick"])),(0,r.Wm)(o.uT,{name:"profile"},{default:(0,r.w5)((()=>[y.hoveringProfile?((0,r.wg)(),(0,r.iD)("div",f)):(0,r.kq)("",!0)])),_:1})],2),(0,r._)("div",{class:"navOpener",onClick:t[4]||(t[4]=function(){return _.changeNav&&_.changeNav(...arguments)})},[(0,r._)("div",{class:(0,a.C_)(["bar1",{openNav:y.hamburgerStatus}])},null,2),(0,r._)("div",{class:(0,a.C_)(["bar2",{openNav:y.hamburgerStatus}])},null,2),(0,r._)("div",{class:(0,a.C_)(["bar3",{openNav:y.hamburgerStatus}])},null,2)])])]),(0,r.Wm)(o.uT,{name:"stir",onBeforeEnter:_.beforeEnter},{default:(0,r.w5)((()=>[y.hamburgerStatus?((0,r.wg)(),(0,r.iD)("div",v,[(0,r._)("ul",w,[(0,r._)("li",null,[_.isLogged?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(x,{key:0,link:"",to:"/register"},{default:(0,r.w5)((()=>[b])),_:1}))]),(0,r._)("li",null,[(0,r.Wm)(x,{link:"",to:"/about"},{default:(0,r.w5)((()=>[k])),_:1})])])])):(0,r.kq)("",!0)])),_:1},8,["onBeforeEnter"])])])}var _={data(){return{status:!1,hamburgerStatus:!1,postingStat:!1,finalLogMessage:null,hoveringProfile:!0}},computed:{isLogged(){return this.$store.getters.getAuth}},methods:{beforeEnter(){},login(e){"please login to post"!=e&&"unidentified error contact support"!=e||(this.finalLogMessage=e),this.status=!this.status},posting(){this.postingStat=!this.postingStat},logout(){this.$store.dispatch("logOut")},changeNav(){this.hamburgerStatus=!this.hamburgerStatus},profileHover(){this.hoveringProfile=!0},profileUnHover(){}}},C=n(83744);const x=(0,C.Z)(_,[["render",y],["__scopeId","data-v-6ea67527"]]);var I=x,P={components:{TheHeader:I},setup(){},created(){this.checkFacebook(),this.checkAuth()},methods:{checkAuth(){this.$store.dispatch("isLogged"),this.$store.dispatch("getPosts")},checkFacebook(){FB.getLoginStatus((function(e){statusChangeCallback(e)}))}}};const L=(0,C.Z)(P,[["render",s]]);var S=L,Z=n(17960),A=n(14998);const O={key:0,class:"navigate"};function T(e,t,n,o,s,i){const u=(0,r.up)("router-link");return n.navBar?((0,r.wg)(),(0,r.iD)("button",O,[(0,r.WI)(e.$slots,"default",{},void 0,!0)])):n.link?n.navBar?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(u,{key:2,to:n.to,class:(0,a.C_)(n.mode)},{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default",{},void 0,!0)])),_:3},8,["to","class"])):((0,r.wg)(),(0,r.iD)("button",{key:1,class:(0,a.C_)(n.mode)},[(0,r.WI)(e.$slots,"default",{},void 0,!0)],2))}var E={props:{mode:{type:String,required:!1,default:null},link:{type:Boolean,required:!1,default:!1},to:{type:String,required:!1,default:"/"},navBar:{type:Boolean,required:!1,default:!1}}};const U=(0,C.Z)(E,[["render",T],["__scopeId","data-v-0d0385cc"]]);var B=U;function D(e,t,n,o,s,i){return(0,r.wg)(),(0,r.iD)("div",{class:(0,a.C_)(["card",n.form])},[(0,r.WI)(e.$slots,"default",{},void 0,!0)],2)}var q={props:{form:{type:String,reqired:!1,default:null}}};const M=(0,C.Z)(q,[["render",D],["__scopeId","data-v-035e72bb"]]);var W=M,N=n(71399);function F(e,t,n,o,s,a){const i=(0,r.up)("router-link");return(0,r.wg)(),(0,r.j4)(i,{to:n.to,class:"link"},{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default",{},void 0,!0)])),_:3},8,["to"])}var j={props:{to:{type:String,required:!1,default:"/"}}};const $=(0,C.Z)(j,[["render",F],["__scopeId","data-v-d317d7c2"]]);var H=$;const V={key:0,class:"container"},R={class:"user"},z={class:"title"},G={class:"message"};function J(e,t,n,o,s,i){return s.isLoading?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("section",V,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.post,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"posts",key:e},[(0,r._)("div",R,"--"+(0,a.zw)(e.author.name),1),(0,r._)("div",z,[(0,r._)("h3",null,(0,a.zw)(e.body.title),1)]),(0,r._)("div",G,[(0,r._)("p",null,(0,a.zw)(e.body.message),1)])])))),128))]))}var K=n(15861),Y=n(64687),Q=n.n(Y),X={emits:["doneLoading"],data(){return{isLoading:!0}},computed:{post(){return this.$store.getters["getPost"]},postId(){const e=this.$store.getters["getCurrentPostId"];return e}},methods:{getPost(){var e=this;return(0,K.Z)(Q().mark((function t(){return Q().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("getpost",e.postId).then((()=>{e.isLoading=!1,e.$emit("doneLoading")}));case 2:case"end":return t.stop()}}),t,this)})))()}},activated(){var e=this;return(0,K.Z)(Q().mark((function t(){return Q().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getPost();case 2:case"end":return t.stop()}}),t,this)})))()}};const ee=(0,C.Z)(X,[["render",J],["__scopeId","data-v-31897795"]]);var te=ee;const ne={class:"lds-hourglass"};function oe(e,t){return(0,r.wg)(),(0,r.iD)("div",ne)}const re={},se=(0,C.Z)(re,[["render",oe]]);var ae=se;const ie={key:0,open:""},ue={key:0},ce=(0,r.Uk)("Close");function le(e,t,n,s,i,u){const c=(0,r.up)("base-button");return(0,r.wg)(),(0,r.j4)(r.lR,{to:"body"},[n.show?((0,r.wg)(),(0,r.iD)("div",{key:0,onClick:t[0]||(t[0]=function(){return u.tryClose&&u.tryClose(...arguments)}),class:"backdrop"})):(0,r.kq)("",!0),(0,r.Wm)(o.uT,{name:"dialog",class:(0,a.C_)({spin:n.spinner})},{default:(0,r.w5)((()=>[n.show?((0,r.wg)(),(0,r.iD)("dialog",ie,[(0,r._)("header",null,[(0,r.WI)(e.$slots,"header",{},(()=>[(0,r._)("h2",null,(0,a.zw)(n.title),1)]),!0)]),(0,r._)("section",null,[(0,r.WI)(e.$slots,"default",{},void 0,!0)]),n.fixed?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("menu",ue,[(0,r.WI)(e.$slots,"actions",{},(()=>[(0,r.Wm)(c,{onClick:u.tryClose},{default:(0,r.w5)((()=>[ce])),_:1},8,["onClick"])]),!0)]))])):(0,r.kq)("",!0)])),_:3},8,["class"])])}var de={props:{show:{type:Boolean,required:!0},title:{type:String,required:!1},fixed:{type:Boolean,required:!1,default:!1},spinner:{type:Boolean,required:!1,default:!1}},emits:["close"],methods:{tryClose(){this.fixed||this.$emit("close")}}};const ge=(0,C.Z)(de,[["render",le],["__scopeId","data-v-25fa3d06"]]);var pe=ge,me=n(7102);const he=(0,o.ri)(S),fe={clientId:"317778007455-f8rdf2fusbfn4fcjef0ungb09k7a7bav.apps.googleusercontent.com",scope:"profile",prompt:"select_account",fetch_basic_profile:!0};he.component("base-button",B),he.component("base-card",W),he.component("base-login",N.Z),he.component("base-link",H),he.component("base-post",te),he.component("base-spinner",ae),he.component("base-dialog",pe),he.use(A.Z),he.use(me.Z,fe),he.use(Z.Z),he.mount("#app")},17960:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}});var o=n(15861),r=n(64687),s=n.n(r),a=n(22201),i=n(66252),u=n(49963),c=n(3577);const l={key:0,class:"container"},d={class:"user"},g={class:"title"},p={class:"text"},m={class:"message"};function h(e,t,n,o,r,s){const a=(0,i.up)("router-link"),h=(0,i.up)("base-card");return(0,i.wg)(),(0,i.j4)(h,{form:"homeForm"},{default:(0,i.w5)((()=>[null!==s.getThis?((0,i.wg)(),(0,i.iD)("section",l,[(0,i.Wm)(u.W3,{tag:"postMagick",name:"posts"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.getPreview,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"posts",key:e._id},[(0,i._)("div",d,"--"+(0,c.zw)(e.author.name),1),(0,i._)("div",g,[(0,i.Wm)(a,{to:{name:"comment",params:{postId:e._id}}},{default:(0,i.w5)((()=>[(0,i.Uk)((0,c.zw)(e.body.titleMethod()),1)])),_:2},1032,["to"])]),(0,i._)("div",p,[(0,i._)("div",m,(0,c.zw)(e.body.messageMethod()),1)])])))),128))])),_:1})])):(0,i.kq)("",!0)])),_:1})}n(94058);var f={computed:{getThis(){const e=this.$store.getters["getThis"];return e},getPreview(){return this.$store.getters["getPreview"]},listing(){if(void 0!=this.getPreview){let e=JSON.parse(JSON.stringify(this.getPreview));return e.sort()}return 2}}},v=n(83744);const w=(0,v.Z)(f,[["render",h],["__scopeId","data-v-30e768af"]]);var b=w,k=n(14998);const y=[{path:"/",name:"Home",component:b},{path:"/about",name:"About",component:()=>n.e(443).then(n.bind(n,33587))},{path:"/register",name:"regUser",component:()=>n.e(265).then(n.bind(n,90265))},{path:"/secret",name:"secret",component:()=>n.e(138).then(n.bind(n,4138)),beforeEnter:(e,t,n)=>{k.Z.dispatch("isLogged").then((()=>{k.Z.getters.getAuth?n():n({path:"/"})}))}},{path:"/commenttest",name:"comment",component:()=>n.e(709).then(n.bind(n,23709)),props:function(){var e=(0,o.Z)(s().mark((function e(t){var n;return s().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.params.postId,e.next=3,k.Z.dispatch("setPost",n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{path:"/posting",name:"AddPost",component:()=>n.e(315).then(n.bind(n,40315))},{path:"/:pathMatch(.*)*",name:"notFound",component:()=>n.e(801).then(n.bind(n,62801))}],_=(0,a.p7)({history:(0,a.PO)("/"),routes:y});var C=_},94058:function(e,t,n){"use strict";var o=n(13264),r=n(14998);const s="http://localhost:3000";var a=(0,o.io)(s,{transports:["websocket","polling","flashsocket"]});a.on("updateHome",(()=>{r.Z.dispatch("getPosts")})),a.on("updatePost",(e=>{e.postId===localStorage.getItem("postId")&&r.Z.dispatch("commentUpdate",e)})),a.on("facebookLogOut",(()=>{r.Z.dispatch("logOutFromFacebook")})),a.on("updateHome",(e=>{r.Z.dispatch("homePageUpdate",e)}))},1181:function(){},99539:function(){},14998:function(e,t,n){"use strict";n.d(t,{Z:function(){return $}});var o=n(33907),r=n(35201),s=n.n(r),a=n(1181),i=n.n(a),u=n(99539),c=n.n(u),l={autoLog(e,t){e.isLogged=t},validator(e,t){const n={length:t.length,hasNum:t.hasNum,hasUpper:t.hasUpper,hasLow:t.hasLow,hasSpecial:t.hasSpecial};e.isValid=n},userValidity(e,t){e.userIsValid=t},changeGoogleValidity(e,t){e.googleAccountIsValid=t},facebookLoginMutation(e,t){e.facebookAccountLoggedIn=!!t}},d=n(15861),g=n(64687),p=n.n(g),m=n(9669),h=n.n(m),f=n(49704),v=n.n(f),w=n(25108);const b="http://localhost:3000/users";var k={registerUser(e,t){return(0,d.Z)(p().mark((function n(){var o,r,s;return p().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("regularRegister"!==t.type){n.next=4;break}return o={userName:t.name,userAge:t.age,email:t.email,password:t.password,type:t.type},y(o,"register"),n.abrupt("return");case 4:if("googleRegister"!==t.type){n.next=8;break}return r={everything:t.everything,name:t.name,surname:t.surname,email:t.email,googleId:t.gId,idToken:t.idToken,type:t.type},y(r,"register"),n.abrupt("return");case 8:"facebookRegister"===t.type&&(s={name:t.name,surname:t.surname,email:t.email,facebookId:t.facebookId,type:t.type,idToken:t.accessToken},e.commit("facebookLoginMutation",!0),y(s,"register"));case 9:case"end":return n.stop()}}),n,this)})))()},isLogged(e){return(0,d.Z)(p().mark((function t(){return p().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h()({url:b+"/checkauth",method:"POST",withCredentials:!0}).then((t=>{"error"!==t.data?e.commit("autoLog",!0):e.commit("autoLog",!1)}));case 2:case"end":return t.stop()}}),t,this)})))()},logOut(){return(0,d.Z)(p().mark((function e(){return p().wrap((function(e){while(1)switch(e.prev=e.next){case 0:$.getters.isFacebookLoggedIn&&$.dispatch("logOutFromFacebook"),h()({url:b+"/logOut",method:"POST",withCredentials:!0}).then((e=>{"error"!==e&&$.dispatch("isLogged")}));case 2:case"end":return e.stop()}}),e,this)})))()},login(e,t){return(0,d.Z)(p().mark((function e(){return p().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y(t,"login");case 2:case"end":return e.stop()}}),e,this)})))()},passworValidation(e,t){e.commit("validator",t)},doesUserExists(e,t){h()({url:b+"/doesUserExists",method:"POST",data:{userName:t},withCredentials:!0}).then((t=>{e.commit("userValidity",t.data)})).catch((e=>{w.log(e)}))},logOutFromFacebook(e){FB.logout(),e.commit("facebookLoginMutation")},facebookUserLoggedIn(e,t){e.commit("facebookLoginMutation",t)}};function y(e,t){return _.apply(this,arguments)}function _(){return _=(0,d.Z)(p().mark((function e(t,n){return p().wrap((function(e){while(1)switch(e.prev=e.next){case 0:v().sign({user:t},"CAE4B1F102AAD3669F1F0D670ECDD4E33C3489D784B8C45A6EE4FADBCDA68734E88B4B0703BCC5CB65C22BDE80F46188C336A33CE5EBA43C07E902864AAE78F9",function(){var e=(0,d.Z)(p().mark((function e(t,o){return p().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return w.log(t),e.abrupt("return");case 3:if("register"!==n){e.next=7;break}return e.next=6,C(o);case 6:return e.abrupt("return");case 7:if("login"!==n){e.next=10;break}return e.next=10,I(o);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e,this)}))),_.apply(this,arguments)}function C(e){return x.apply(this,arguments)}function x(){return x=(0,d.Z)(p().mark((function e(t){var n,o,r;return p().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h()({url:b+"/register",method:"POST",data:{token:t},withCredentials:!0});case 2:return n=e.sent,e.next=5,JSON.stringify(n.data);case 5:if(o=e.sent,$.dispatch("isLogged"),"error"!==n.data){e.next=11;break}throw r=new Error(o||"something is wrong"),w.log(r),r;case 11:case"end":return e.stop()}}),e,this)}))),x.apply(this,arguments)}function I(e){return P.apply(this,arguments)}function P(){return P=(0,d.Z)(p().mark((function e(t){return p().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h()({url:b+"/login",method:"POST",data:{token:t},withCredentials:!0}).then(function(){var e=(0,d.Z)(p().mark((function e(t){var n;return p().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return w.log(t),e.next=3,$.dispatch("isLogged");case 3:if("error"!==t.data){e.next=7;break}throw n=new Error(JSON.stringify(t.data)||"something is wrong"),w.log(n),n;case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()).catch((e=>w.log(e)));case 2:case"end":return e.stop()}}),e,this)}))),P.apply(this,arguments)}var L={getAuth(e){return e.isLogged},isValid(e){return e.isValid},validUser(e){return e.userIsValid},isAccountValid(e){return e.googleAccountIsValid},isFacebookLoggedIn(e){return e.facebookAccountLoggedIn}},S={state(){return{isLogged:!1,isValid:{},googleAccountIsValid:!1,facebookAccountLoggedIn:!1}},mutations:l,actions:k,getters:L},Z={post(e,t){const n=[],o=[];t.forEach((e=>{const t={author:{name:e.user.userName},body:{title:e.body.title,message:e.body.message},_id:e._id,date:e.createdAt},r={author:{name:e.user.userName},body:{titleMethod:()=>{const t=e.body.title;return t.length>100?t.substr(0,99)+"...":t},messageMethod:()=>{const t=e.body.message;return t.length>400?t.substr(0,350)+"...":t}},_id:e._id,date:e.createdAt};n.push(t),o.push(r)})),e.posts=n,e.previewPosts=o},currentPost(e,t){const n=[{author:{name:t.user.userName},body:{title:t.body.title,message:t.body.message},_id:t._id}];e.currentPost=n},updateHomePage(e,t){return(0,d.Z)(p().mark((function n(){var o,r,s,a;return p().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o={author:{name:t.author.name},body:{title:t.body.title,message:t.body.message},_id:t._id,date:t.createdAt},a={author:{name:t.author.userName},body:{titleMethod:()=>(r=t.body.title,r.length>100?r.substr(0,99)+"...":r),messageMethod:()=>(s=t.body.message,s.length>400?s.substr(0,350)+"...":s)},_id:t._id,date:t.createdAt},n.next=4,e.posts.unshift(o);case 4:return n.next=6,e.previewPosts.unshift(a);case 6:case"end":return n.stop()}}),n,this)})))()},clearCache(e){e.currentPost=[]}},A=n(25108);const O="http://localhost:3000/post";var T={getPosts(e){return(0,d.Z)(p().mark((function t(){return p().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h()({url:O+"/getposts",method:"GET",withCredentials:!0}).then((t=>{e.commit("post",t.data)})).catch((e=>{A.log(e)}));case 2:case"end":return t.stop()}}),t,this)})))()},getpost(e,t){return(0,d.Z)(p().mark((function n(){return p().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t){n.next=6;break}return localStorage.setItem("postId",t),n.next=4,h()({url:O+"/getpost",method:"POST",data:{postId:t},withCredentials:!0}).then((t=>{e.commit("currentPost",t.data)})).catch((e=>{A.log(e)}));case 4:n.next=9;break;case 6:if(!localStorage.getItem("postId")){n.next=9;break}return n.next=9,h()({url:O+"/getpost",method:"POST",data:{postId:localStorage.getItem("postId")}}).then((t=>{e.commit("currentPost",t.data)})).catch((e=>{A.log(e)}));case 9:case"end":return n.stop()}}),n,this)})))()},clearPost(e){e.commit("clearCache")},addPost(e,t){return(0,d.Z)(p().mark((function e(){return p().wrap((function(e){while(1)switch(e.prev=e.next){case 0:h()({url:O+"/",method:"POST",data:{title:t.title,message:t.message,testStatus:!1},withCredentials:!0}).then((()=>{}));case 1:case"end":return e.stop()}}),e,this)})))()},homePageUpdate(e,t){"regular update"!==t?e.commit("updateHomePage",t):$.dispatch("getPosts")}},E={getThis(e){return e.posts},getPost(e){return e.currentPost},getPreview(e){return e.previewPosts}},U={state(){return{previewPosts:[],posts:[],currentPost:[]}},mutations:Z,actions:T,getters:E},B={getComments(e,t){const n=localStorage.getItem("postId"),o=[];for(const r of t){const e={body:{username:r.userName,comment:r.comment,commentId:r._id},postId:n};o.push(e)}e.comments=o},updateComment(e,t){const n={body:{username:t.body.username,comment:t.body.message,commentId:t.body._id},postId:t.postId};e.comments.push(n)},setPost(e,t){e.currentPostId=t}},D=n(17960),q=n(25108);const M="http://localhost:3000/comment";var W={clearCrumbs(e){return(0,d.Z)(p().mark((function t(){return p().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.commit("clearCache");case 1:case"end":return t.stop()}}),t,this)})))()},getComments(e,t){return(0,d.Z)(p().mark((function n(){var o,r;return p().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t){n.next=6;break}return localStorage.setItem("postId",t),n.next=4,h()({url:M+"/getcomments",method:"POST",data:{postId:t}}).then((t=>{if("body_error"===t.data&&"error"===t.data)throw o=new Error(t.data||"something went wrong"),q.log(o),o;e.commit("getComments",t.data)})).catch((e=>{q.log(e)}));case 4:n.next=13;break;case 6:if(!localStorage.getItem("postId")){n.next=12;break}return r=localStorage.getItem("postId"),n.next=10,h()({url:M+"/getcomments",method:"POST",data:{postId:r}}).then((t=>{if("body_error"===t.data)throw q.log("error handling"),o=new Error(t||"something went wrong"),o;e.commit("getComments",t.data)})).catch((e=>{q.log(JSON.stringify(e))}));case 10:n.next=13;break;case 12:D.Z.push("/");case 13:case"end":return n.stop()}}),n,this)})))()},saveComment(e,t){return(0,d.Z)(p().mark((function e(){return p().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h()({url:M+"/",method:"POST",data:{Comment:t,postId:localStorage.getItem("postId")},withCredentials:!0});case 2:case"end":return e.stop()}}),e,this)})))()},commentUpdate(e,t){e.commit("updateComment",t)},setPost(e,t){e.commit("setPost",t)}},N={getComments(e){return e.comments},getCurrentPostId(e){return e.currentPostId}},F={state(){return{comments:[],currentPostId:null}},mutations:B,actions:W,getters:N};const j=(0,o.MT)({state:{},mutations:s(),actions:i(),getters:c(),modules:{testMode:S,postMode:U,commentMode:F}});var $=j},35201:function(){},80950:function(){},46601:function(){},89214:function(){},8623:function(){},7748:function(){},85568:function(){},56619:function(){},77108:function(){},52361:function(){},94616:function(){}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=e,function(){var e=[];n.O=function(t,o,r,s){if(!o){var a=1/0;for(l=0;l<e.length;l++){o=e[l][0],r=e[l][1],s=e[l][2];for(var i=!0,u=0;u<o.length;u++)(!1&s||a>=s)&&Object.keys(n.O).every((function(e){return n.O[e](o[u])}))?o.splice(u--,1):(i=!1,s<a&&(a=s));if(i){e.splice(l--,1);var c=r();void 0!==c&&(t=c)}}return t}s=s||0;for(var l=e.length;l>0&&e[l-1][2]>s;l--)e[l]=e[l-1];e[l]=[o,r,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,o){return n.f[o](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+(443===e?"about":e)+"."+{138:"c36b85d3",265:"72561f97",315:"5c2eb510",443:"d49e6cba",709:"df46e6ac",801:"b08fb5ab"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+e+"."+{265:"aebb4f3b",315:"d5c73840",709:"3b164c96"}[e]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="client:";n.l=function(o,r,s,a){if(e[o])e[o].push(r);else{var i,u;if(void 0!==s)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var d=c[l];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==t+s){i=d;break}}i||(u=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,n.nc&&i.setAttribute("nonce",n.nc),i.setAttribute("data-webpack",t+s),i.src=o),e[o]=[r];var g=function(t,n){i.onerror=i.onload=null,clearTimeout(p);var r=e[o];if(delete e[o],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(g.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=g.bind(null,i.onerror),i.onload=g.bind(null,i.onload),u&&document.head.appendChild(i)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){n.p="/"}(),function(){var e=function(e,t,n,o){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css";var s=function(s){if(r.onerror=r.onload=null,"load"===s.type)n();else{var a=s&&("load"===s.type?"missing":s.type),i=s&&s.target&&s.target.href||t,u=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");u.code="CSS_CHUNK_LOAD_FAILED",u.type=a,u.request=i,r.parentNode.removeChild(r),o(u)}};return r.onerror=r.onload=s,r.href=t,document.head.appendChild(r),r},t=function(e,t){for(var n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var r=n[o],s=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(s===e||s===t))return r}var a=document.getElementsByTagName("style");for(o=0;o<a.length;o++){r=a[o],s=r.getAttribute("data-href");if(s===e||s===t)return r}},o=function(o){return new Promise((function(r,s){var a=n.miniCssF(o),i=n.p+a;if(t(a,i))return r();e(o,i,r,s)}))},r={143:0};n.f.miniCss=function(e,t){var n={265:1,315:1,709:1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=o(e).then((function(){r[e]=0}),(function(t){throw delete r[e],t})))}}(),function(){var e={143:0};n.f.j=function(t,o){var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)o.push(r[2]);else{var s=new Promise((function(n,o){r=e[t]=[n,o]}));o.push(r[2]=s);var a=n.p+n.u(t),i=new Error,u=function(o){if(n.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var s=o&&("load"===o.type?"missing":o.type),a=o&&o.target&&o.target.src;i.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",i.name="ChunkLoadError",i.type=s,i.request=a,r[1](i)}};n.l(a,u,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,s,a=o[0],i=o[1],u=o[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(r in i)n.o(i,r)&&(n.m[r]=i[r]);if(u)var l=u(n)}for(t&&t(o);c<a.length;c++)s=a[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(l)},o=self["webpackChunkclient"]=self["webpackChunkclient"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(9012)}));o=n.O(o)})();
//# sourceMappingURL=app.6de57930.js.map